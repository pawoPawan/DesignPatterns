Implementation of design patetrn in C++